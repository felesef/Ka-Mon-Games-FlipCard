<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Final Project Monika & Kadri</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./styles/main.css" />
    <script>window.API_BASE = "";</script>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>Memory Game</h1>
      </div>

      <div class="setup-container" id="setupContainer">
        <label for="userName">Enter user name:</label>
        <input type="text" id="userName" placeholder="Your name" maxlength="100" />

        <label for="theme">Choose Cards theme:</label>
        <select id="theme">
          <option value="random">random</option>
          <option value="dogs">dogs</option>
          <option value="flags">flags</option>
          <option value="animals">animals</option>
          <option value="plants">plants</option>
          <option value="food">food</option>
        </select>

        <label for="level">Choose card count (row × columns):</label>
        <select id="level">
          <option value="4x2">level 1 (4×2)</option>
          <option value="4x3">level 2 (4×3)</option>
          <option value="4x4">level 3 (4×4)</option>
          <option value="5x4">level 4 (5×4)</option>
          <option value="5x6">level 5 (5×6)</option>
        </select>

        <button type="button" class="button button-primary" id="startGameBtn">Start the game</button>
      </div>

      <div class="game-area" id="gameArea" hidden>
        <div class="stats-container">
          <div class="status">
            <span class="status-label">Moves:</span>
            <span class="status-value" id="movesCounter">0</span>
          </div>
          <div class="status">
            <span class="status-label">Time:</span>
            <span class="status-value" id="timeCounter">0:00</span>
          </div>
        </div>

        <div class="game-board" id="gameBoard"></div>

        <div class="controls">
          <button type="button" class="button" id="newGameBtn" onclick="typeof newGame==='function'&&newGame()">New Game</button>
          <button type="button" class="button" id="scoreboardBtn" onclick="typeof openScoreboard==='function'&&openScoreboard()">Scoreboard</button>
        </div>
      </div>
    </div>

    <div class="modal" id="winModal">
      <div class="modal-content">
        <h2>Congratulations!</h2>
        <h3>You win!</h3>
        <p>Moves: <span id="finalMoves">0</span></p>
        <p>Time: <span id="finalTime">0:00</span></p>
        <p>Score: <span id="finalScore">0</span></p>
        <p class="scoreboard-hint">Check the scoreboard for your rank.</p>
        <button type="button" class="button" id="closeWinModalBtn" onclick="typeof closeModal==='function'&&closeModal()">X</button>
      </div>
    </div>

    <div class="modal" id="scoreboardModal">
      <div class="modal-content modal-scoreboard">
        <h2>Scoreboard</h2>
        <div id="scoreboardList"></div>
        <button type="button" class="button" id="closeScoreboardBtn" onclick="typeof closeScoreboard==='function'&&closeScoreboard()">Close</button>
      </div>
    </div>

    <script type="module" src="./js/main.js"></script>
    <script>
      setTimeout(function () {
        if (typeof newGame !== "function") {
          var el = document.createElement("p");
          el.style.cssText = "background:#c00;color:#fff;padding:12px;text-align:center;margin:0;";
          el.textContent = "App failed to load. Open from http://localhost:3000 (run npm start in project root).";
          document.body.insertBefore(el, document.body.firstChild);
        }
      }, 3000);
    </script>
  </body>
</html>
